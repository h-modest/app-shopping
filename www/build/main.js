$(function(){$this=$(".classify"),$list=$this.find(".list-bar li"),$switch=$this.find(".list-switch"),$shop=$this.find(".shop-bar .shop-navigation"),$option=$this.find(".shop-option"),$goods=$this.find(".goods"),$list.click(function(){$(this).index()>0&&($list.removeClass("active"),$(this).addClass("active"))}),$switch.click(function(){$(".classify").find(".content").toggleClass("closed")}),$shop.find(".fold").click(function(){$shop.toggleClass("stretch")}),$option.find("li").click(function(){$(this).index()>0&&($option.find("li").removeClass("active"),$(this).addClass("active"))}),$option.find("dd").click(function(){var s=$(this).index();$option.find("dd").removeClass("active"),$(this).addClass("active"),$goods.removeClass().addClass("goods"),1===s&&$goods.addClass("image-text"),2===s&&$goods.addClass("entry")})}),$(function(){$carousel=$(".home .carousel").find(".pic li"),$page=$(".home .direct"),$icon=$(".home .carousel").find(".page-btn dd");var s=$carousel.length;$carousel.each(function(i){var e=i==s-1?-1:i;$(this).css("left",920*e+"px")});var i=function(i){$carousel.each(function(e){$this=$(this);var t=parseInt($this.css("left")),n=parseInt($this.css("width"));if(t%n==0){var a;i?t<0?(a=(s-2)*n,$this.addClass("transfer")):(a=t-n,$this.removeClass("transfer")):t>(s-3)*n?(a=-n,$this.addClass("transfer")):(a=t+n,$this.removeClass("transfer")),0===a?$icon.eq(e).addClass("active"):$icon.eq(e).removeClass("active"),$this.css("left",a+"px")}})};$page.find(".page-left").click(function(){i(!1)}),$page.find(".page-right").click(function(){i(!0)}),$icon.click(function(){!function(i){$carousel.each(function(e){var t;0===(t=0===i?e==s-1?-1:e:e-i<-1?e+s-i:e-i)&&$(this).removeClass("transfer"),$(this).css("left",920*t+"px"),0===t?$icon.eq(e).addClass("active"):$icon.eq(e).removeClass("active")})}($(this).index())});var e=function(s,i,e){i.hide().eq(s).show(),e.removeClass("active").eq(s).addClass("active")},t=function(s,i){i.mouseover(function(){var t=$(this).index();e(t,s,i)})};$senior=$(".home .senior-list"),$advanced=$(".home .advanced-list"),$tab=$senior.find(".switch dd"),$tab_list=$senior.find(".tab-piecre ul"),$advanced_tab=$advanced.find(".switch dd"),$advanced_tab_list=$advanced.find(".tab-piecre ul"),e(0,$tab_list,$tab),e(0,$advanced_tab_list,$advanced_tab),t($tab_list,$tab),t($advanced_tab_list,$advanced_tab),$back=$(".aside-navigation .back-top"),$back.click(function(){$("html, body").animate({scrollTop:0},1e3)})}),$(function(){$this=$(".classify-body").find(".all-list dl"),$this.each(function(s){$dl=$(this),$dl.mouseover(function(){$this.eq(s).addClass("active")}),$dl.mouseleave(function(){$this.eq(s).removeClass("active")})}),$nav=$(".aside-navigation .enlarge").find(".content .icon"),$nav.click(function(){$polling=$(this).next().find("dl"),$polling.animate({top:"-64px"},500,function(){$polling.css("top",0).find("dd:first").appendTo($polling)})})}),jQuery.ljsGlasses={pcGlasses:function(s){var i=$("."+s.boxid),e=$("."+s.sumid),t=i.find("img"),n=t.length,a=0,o=[];e.append("<p class='list'></p>");for(var c=e.find("p"),d=0,l=0;l<n;l++){o[l]=[],o[l][0]=t.eq(l).attr("src"),o[l][1]=parseInt(t.eq(l).css("width")),o[l][2]=parseInt(t.eq(l).css("height"));var p=o[l][1]/o[l][2];1==p&&(o[l][3]=s.boxw,o[l][4]=s.boxh,o[l][5]=0,o[l][6]=0,o[l][7]=s.boxw/2,o[l][8]=2*s.boxw,o[l][9]=2*s.boxh,c.append("<span><img src='"+t.eq(l).attr("src")+"' width='"+s.sumw+"' height='"+s.sumh+"' /></span>")),p>1&&(o[l][3]=s.boxw,o[l][4]=s.boxw/p,o[l][5]=(s.boxh-o[l][4])/2,o[l][6]=0,o[l][7]=o[l][4]/2,o[l][8]=2*s.boxh*p,o[l][9]=2*s.boxh,d=s.sumh-s.sumw/p,d/=2,c.append("<span><img src='"+t.eq(l).attr("src")+"' width='"+s.sumw+"' style='top:"+d+"px;' /></span>")),p<1&&(o[l][3]=s.boxh*p,o[l][4]=s.boxh,o[l][5]=0,o[l][6]=(s.boxw-o[l][3])/2,o[l][7]=o[l][3]/2,o[l][8]=2*s.boxw,o[l][9]=2*s.boxw/p,d=s.sumw-s.sumh*p,d/=2,c.append("<span><img src='"+t.eq(l).attr("src")+"' height='"+s.sumh+"' style='left:"+d+"px;' /></span>"))}t.remove(),e.append("<div style='clear:both;width:100%;'></div>");var r=e.find("span"),h=e.find("img");r.eq(a).addClass(s.sumsel);var f=2*s.sumborder+s.sumh,m=(f+s.sumi-2)*s.sums,u=(f+s.sumi)*n;e.css({overflow:"hidden",height:f+"px",width:m+"px",position:"relative"}),c.css({width:u+"px"}),r.css({float:"left","margin-left":s.sumi+"px",width:s.sumw+"px",height:s.sumh+"px",overflow:"hidden",position:"relative"}),h.css({"max-width":"100%","max-height":"100%",position:"relative"}),i.append("<div style='position:relative;'><b style='display:block;'><img class='pic' style='display:block;' src='' /></b><span class='magnifier'></span></div><p class='enlarge-pic'><img style='max-width:none;max-height:none;position:relative;left:0;top:0;' src='' /></p>");var v=i.find(".magnifier"),x=i.find("b img"),g=i.find("div"),b=i.find("p"),w=i.find("p img"),C=s.boxw+10;b.css({width:s.boxw+"px",height:s.boxh+"px",left:C+"px"});var k=function(){var s=o[a][0].split("_");s[1]="X"+s[1],s=s.join("_"),w.attr("src",s),x.attr("src",o[a][0]),g.css({width:o[a][3]+"px",height:o[a][4]+"px",top:o[a][5]+"px",left:o[a][6]+"px",position:"relative"}),v.css({width:o[a][7]+"px",height:o[a][7]+"px"}),w.css({width:o[a][8]+"px",height:o[a][9]+"px"})};k(),g.mousemove(function(s){var i=v.width()/2,e=g.width()-i,t=g.height()-i,n=0,a=0,o=s.pageX-g.offset().left,c=s.pageY-g.offset().top;n=o-i,a=c-i,o<=i&&(n=0),o>=e&&(n=e-i),c<=i&&(a=0),c>=t&&(a=t-i),v.css({left:n+"px",top:a+"px"});var d=-n*b.width()/v.width(),l=-a*b.width()/v.width();w.css({left:d+"px",top:l+"px"})}),g.mouseenter(function(){v.css("display","block"),b.css("display","block")}),g.mouseleave(function(){v.css("display","none"),b.css("display","none")});var _=$("."+s.nextid),q=$("."+s.lastid),y=0,j=function(){var i=-y*(f+s.sumi);c.is(":animated")&&c.stop(!0,!0),c.animate({left:i+"px"},300),r.eq(a).addClass(s.sumsel).siblings().removeClass(s.sumsel),k()};if(n<=s.sums)d=(s.sums-n)*f/2,c.css("left",d+"px"),_.click(function(){++a>=n&&(a=n-1),r.eq(a).addClass(s.sumsel).siblings().removeClass(s.sumsel),k()}),q.click(function(){--a<=0&&(a=0),r.eq(a).addClass(s.sumsel).siblings().removeClass(s.sumsel),k()});else{var G=n-s.sums;_.click(function(){++y>=G&&(y=G),a<=y&&(a=y),j()}),q.click(function(){--y<=0&&(y=0),a>=y+s.sums&&(a=y+s.sums-1),j()})}r.hover(function(){a=$(this).index(),r.eq(a).addClass(s.sumsel).siblings().removeClass(s.sumsel),k()})}},$(function(){$product=$(".product"),$.ljsGlasses.pcGlasses({boxid:"main-view",sumid:"show-view",boxw:450,boxh:450,sumw:60,sumh:60,sumi:7,sums:6,sumsel:"sel",sumborder:1,lastid:"previous-page",nextid:"next-page"}),$recommend_view=$product.find(".recommend .list ul");var s=function(s){s?($recommend_view.css("top","-154px").find("li:last-child").prependTo($recommend_view),$recommend_view.animate({top:0},500)):$recommend_view.animate({top:"-144px"},500,function(){$recommend_view.css("top",0).find("li").eq(0).appendTo($recommend_view)})};$product.find(".recommend .page-down").click(function(){s(!1)}),$product.find(".recommend .page-up").click(function(){s(!0)})});